#!/bin/bash

# Compilers:                                                                                                                                              
UNAME_S=$(uname -s)
PWD=$(pwd)

MODE=debug

case ${UNAME_S} in
    Linux*)
	SO_DEFORMATION=target/$MODE/libdeformation.so
	SO_INTEGRATOR=target/$MODE/libintegrator.so
	SO_INTEGRAND=target/$MODE/libintegrand.so;;
    Darwin*)
	SO_DEFORMATION=target/$MODE/libdeformation.dylib
	SO_INTEGRATOR=target/$MODE/libintegrator.dylib
	SO_INTEGRAND=target/$MODE/libintegrand.dylib;;
    *)
	echo "UNKNOWN:${UNAME_S}"
	exit 0
esac

#Build libraries for python 
cd rust_backend/
#cargo build --release
cargo build

#Rename them to be called from MadGraph
cp ${SO_DEFORMATION} deformation.so
cp ${SO_INTEGRAND} integrand.so
cp ${SO_INTEGRATOR} integrator.so

